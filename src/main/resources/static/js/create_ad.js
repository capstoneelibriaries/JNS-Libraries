console.log("Running create ad.js");

const form = {
    create: "#create-ad",
    price: {
        label: "#ad-price",
        field: "#create-ad-price",
    },
    shipping: {
        label: "#ad-shipping",
        field: "#create-ad-shipping",
    },
    tradable: {
        label: "#ad-tradable",
        field: "#create-ad-tradable",
    },
    newBook: {
        label: "#ad-new-book",
        button: "#btn-ad-new-book",
        form: "#ad-new-book-form",
    },
    submit: {
        label: "#ad-submit-all",
        button: "#btn-ad-submit-all",
    }
};

const generateISBN = (event) => {
    // TODO: do something useful with the event
    // create a form object for each book
    let bookForm = {
        section: `new-book-${bookForms.length}`,
        isbn: `new-book-${bookForms.length}-isbn`,
    };
    // append a new html section to the form
    $(form.newBook.form).append(
        `<section id=${bookForm.section}>` +
        `<label for="${bookForm.isbn}">ISBN</label>` +
        `<input id="${bookForm.isbn}" type="number" minlength="${isbn_min}" maxlength="${isbn_max}" name="${bookForm.isbn}" />` +
        `</section>`
    );
    bookForms.push(bookForm);
};
/*
* Begin Main
* */
// constants that control html elements generated by jquery
const isbn_min = 10;
const isbn_max = 13;

// book forms are pushed to this array
let bookForms = [];

$(form.newBook.button).on("click", (event) => generateISBN(event));